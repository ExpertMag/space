{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport { gql } from 'apollo-angular';\nimport { BehaviorSubject, map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"apollo-angular\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../shared/characteristic/characteristic.component\";\nimport * as i5 from \"@angular/forms\";\n\nconst _c0 = function (a1) {\n  return [\"/\", a1];\n};\n\nfunction ListComponent_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 19)(1, \"div\")(2, \"div\", 20)(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 21);\n    i0.ɵɵtext(6, \"\\u279D\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 22);\n    i0.ɵɵelement(8, \"app-characteristic\", 23)(9, \"app-characteristic\", 24);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ship_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ship_r2 == null ? null : ship_r2.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, ship_r2 == null ? null : ship_r2.id));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", ship_r2 == null ? null : ship_r2.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", \"\" + (ship_r2 == null ? null : ship_r2.year_built));\n  }\n}\n\nfunction ListComponent_option_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const homePort_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(homePort_r3);\n  }\n}\n\nconst queryFields = gql`\n  query Feed($offset: Int, $limit: Int, $search: String) {\n    ships(find: {name: $search},offset: $offset, limit: $limit) {\n      name\n      id\n      year_built\n      type\n    }\n    shipsResult {\n      result {\n        totalCount\n      }\n    }\n  }\n`;\nconst queryHomePorts = gql`\n  query HomePorts {\n    ships {\n      home_port\n    }\n  }\n`;\nexport class ListComponent {\n  constructor(apollo, cd) {\n    this.apollo = apollo;\n    this.cd = cd;\n    this.ships = new BehaviorSubject([]);\n    this.homePorts = [];\n    this.offset = 0;\n    this.limit = 10;\n    this.totalCount = 0;\n    this.filterForm = new FormGroup({\n      name: new FormControl(''),\n      homePort: new FormControl([]),\n      type: new FormControl('')\n    });\n    this.searchString = '';\n    this.feedQuery = this.apollo.watchQuery({\n      query: queryFields,\n      variables: {\n        offset: this.offset,\n        limit: this.limit,\n        search: this.searchString\n      },\n      fetchPolicy: 'cache-and-network',\n      nextFetchPolicy: 'cache-first'\n    });\n    this.feedQuery.valueChanges.pipe(map(result => {\n      this.totalCount = result.data.shipsResult.result.totalCount;\n      return result;\n    })).subscribe(data => {\n      var _a;\n\n      return this.ships.next((_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.ships);\n    });\n    this.homePortsQuery = this.apollo.watchQuery({\n      query: queryFields\n    });\n    this.homePortsQuery.valueChanges.subscribe(data => {\n      var _a, _b;\n\n      return this.homePorts = (_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.ships) === null || _b === void 0 ? void 0 : _b.map(x => x.name);\n    });\n  }\n\n  fetchNext() {\n    this.offset = this.offset + this.limit >= this.totalCount ? this.totalCount : this.offset + this.limit;\n    this.feedQuery.fetchMore({\n      variables: {\n        offset: this.offset,\n        limit: this.limit,\n        search: this.searchString\n      }\n    }).then(data => {\n      var _a;\n\n      return this.ships.next((_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.ships);\n    });\n  }\n\n  fetchPrev() {\n    this.offset = this.offset - 10 >= 10 ? this.offset - 10 : 0;\n    this.feedQuery.fetchMore({\n      variables: {\n        offset: this.offset,\n        limit: 10,\n        search: this.searchString\n      }\n    }).then(data => {\n      var _a;\n\n      return this.ships.next((_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.ships);\n    });\n  }\n\n  onFilterSubmit() {}\n\n  getHomePorts() {}\n\n  changeHomePort() {}\n\n}\n\nListComponent.ɵfac = function ListComponent_Factory(t) {\n  return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.Apollo), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListComponent,\n  selectors: [[\"app-list\"]],\n  decls: 42,\n  vars: 8,\n  consts: [[1, \"container\"], [1, \"list-container\"], [1, \"list\"], [\"class\", \"list-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"button\", 3, \"disabled\", \"click\"], [1, \"button\", \"button--active\", 3, \"disabled\", \"click\"], [1, \"filter-container\"], [1, \"fields\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"name\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", \"placeholder\", \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\", 3, \"input\"], [\"for\", \"homePort\"], [\"formControlName\", \"homePort\", 3, \"change\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\"], [\"for\", \"type_ships\"], [\"id\", \"type_ships\", \"type\", \"radio\", \"value\", \"barge\"], [\"type\", \"radio\", \"value\", \"cargo\"], [\"type\", \"radio\", \"value\", \"High Speed Craft\"], [\"type\", \"radio\", \"value\", \"Tug\"], [1, \"list-item\"], [1, \"ship-name\"], [1, \"arrow\", 3, \"routerLink\"], [1, \"ship-characteristics\"], [\"key\", \"\\u0422\\u0438\\u043F\", 3, \"value\"], [\"key\", \"\\u0413\\u043E\\u0434 \\u043F\\u043E\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\", 3, \"value\"]],\n  template: function ListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n      i0.ɵɵtext(3, \"SpaceX Ships\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ul\", 2);\n      i0.ɵɵtemplate(5, ListComponent_li_5_Template, 10, 6, \"li\", 3);\n      i0.ɵɵpipe(6, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function ListComponent_Template_button_click_7_listener() {\n        return ctx.fetchPrev();\n      });\n      i0.ɵɵtext(8, \" \\u1438 \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(9);\n      i0.ɵɵelementStart(10, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function ListComponent_Template_button_click_10_listener() {\n        return ctx.fetchNext();\n      });\n      i0.ɵɵtext(11, \" \\u1433 \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 6)(13, \"h2\");\n      i0.ɵɵtext(14, \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"form\", 7);\n      i0.ɵɵlistener(\"ngSubmit\", function ListComponent_Template_form_ngSubmit_15_listener() {\n        return ctx.onFilterSubmit();\n      });\n      i0.ɵɵelementStart(16, \"label\", 8);\n      i0.ɵɵtext(17, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"input\", 9);\n      i0.ɵɵlistener(\"input\", function ListComponent_Template_input_input_18_listener() {\n        return ctx.onSearchKeyPress();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"br\");\n      i0.ɵɵelementStart(20, \"label\", 10);\n      i0.ɵɵtext(21, \"\\u041F\\u043E\\u0440\\u0442\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"select\", 11);\n      i0.ɵɵlistener(\"change\", function ListComponent_Template_select_change_22_listener() {\n        return ctx.changeHomePort();\n      });\n      i0.ɵɵelementStart(23, \"option\");\n      i0.ɵɵtext(24, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u044B\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(25, ListComponent_option_25_Template, 2, 1, \"option\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"button\", 13);\n      i0.ɵɵtext(27, \"\\u041D\\u0430\\u0439\\u0442\\u0438\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"label\", 14);\n      i0.ɵɵtext(29, \"\\u0422\\u0438\\u043F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"p\");\n      i0.ɵɵelement(31, \"input\", 15);\n      i0.ɵɵtext(32, \"Barge\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"p\");\n      i0.ɵɵelement(34, \"input\", 16);\n      i0.ɵɵtext(35, \"Cargo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"p\");\n      i0.ɵɵelement(37, \"input\", 17);\n      i0.ɵɵtext(38, \"High Speed Craft\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"p\");\n      i0.ɵɵelement(40, \"input\", 18);\n      i0.ɵɵtext(41, \"Tug\");\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(6, 6, ctx.ships));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.offset <= 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", ctx.offset / ctx.limit + 1, \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.offset >= ctx.totalCount - ctx.limit);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.filterForm);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.homePorts);\n    }\n  },\n  directives: [i2.NgForOf, i3.RouterLinkWithHref, i4.CharacteristicComponent, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i5.SelectControlValueAccessor, i5.NgSelectOption, i5.ɵNgSelectMultipleOption],\n  pipes: [i2.AsyncPipe],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  background-color: #e5e5e5;\\n}\\n\\n.list-container[_ngcontent-%COMP%] {\\n  margin: 52px 63px 0 63px;\\n  width: 100%;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  list-style-type: none;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] {\\n  margin-top: 24px;\\n  margin-bottom: 52px;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%] {\\n  padding: 40px 0 29px;\\n  border-bottom: 1px solid #a5a5a5;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .ship-characteristics[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1fr;\\n  grid-gap: 0px 10%;\\n  gap: 0px 10%;\\n  grid-auto-flow: column;\\n  justify-content: start;\\n  align-content: center;\\n  justify-items: start;\\n  align-items: center;\\n  grid-template-areas: \\\". .\\\";\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .ship-name[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%] {\\n  margin-left: 23px;\\n}\\n\\n.filter-container[_ngcontent-%COMP%] {\\n  width: 400px;\\n  background-color: white;\\n  padding: 52px 32px;\\n  border-right: 1px solid #a5a5a5;\\n}\\n\\n.filter-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 24px;\\n  line-height: 32px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpc3QuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxhQUFBO0VBQ0EsOEJBQUE7RUFDQSx5QkFBQTtBQUNEOztBQUVBO0VBQ0Msd0JBQUE7RUFDQSxXQUFBO0FBQ0Q7O0FBQ0M7RUFDQyxxQkFBQTtBQUNGOztBQUVDO0VBQ0MsZ0JBQUE7RUFDQSxtQkFBQTtBQUFGOztBQUdDO0VBQ0Msb0JBQUE7RUFDQSxnQ0FBQTtBQURGOztBQUlDO0VBQ0MsYUFBQTtFQUNBLDhCQUFBO0VBQ0EsdUJBQUE7RUFDQSxpQkFBQTtFQUFBLFlBQUE7RUFDQSxzQkFBQTtFQUNBLHNCQUFBO0VBQ0EscUJBQUE7RUFDQSxvQkFBQTtFQUNBLG1CQUFBO0VBQ0EsMEJBQUE7QUFGRjs7QUFLQztFQUNDLGFBQUE7RUFDQSxtQkFBQTtBQUhGOztBQU1DO0VBQ0MsaUJBQUE7QUFKRjs7QUFRQTtFQUNDLFlBQUE7RUFDQSx1QkFBQTtFQUNBLGtCQUFBO0VBQ0EsK0JBQUE7QUFMRDs7QUFNQztFQUNDLGVBQUE7RUFDQSxpQkFBQTtBQUpGIiwiZmlsZSI6Imxpc3QuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcblx0ZGlzcGxheTogZmxleDtcblx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiAjZTVlNWU1O1xufVxuXG4ubGlzdC1jb250YWluZXIge1xuXHRtYXJnaW46IDUycHggNjNweCAwIDYzcHg7XG5cdHdpZHRoOiAxMDAlO1xuXG5cdHVsIHtcblx0XHRsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XG5cdH1cblxuXHQubGlzdCB7XG5cdFx0bWFyZ2luLXRvcDogMjRweDtcblx0XHRtYXJnaW4tYm90dG9tOiA1MnB4O1xuXHR9XG5cblx0Lmxpc3QtaXRlbSB7XG5cdFx0cGFkZGluZzogNDBweCAwIDI5cHg7XG5cdFx0Ym9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNhNWE1YTU7XG5cdH1cblxuXHQuc2hpcC1jaGFyYWN0ZXJpc3RpY3Mge1xuXHRcdGRpc3BsYXk6IGdyaWQ7XG5cdFx0Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuXHRcdGdyaWQtdGVtcGxhdGUtcm93czogMWZyO1xuXHRcdGdhcDogMHB4IDEwJTtcblx0XHRncmlkLWF1dG8tZmxvdzogY29sdW1uO1xuXHRcdGp1c3RpZnktY29udGVudDogc3RhcnQ7XG5cdFx0YWxpZ24tY29udGVudDogY2VudGVyO1xuXHRcdGp1c3RpZnktaXRlbXM6IHN0YXJ0O1xuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0Z3JpZC10ZW1wbGF0ZS1hcmVhczogJy4gLic7XG5cdH1cblxuXHQuc2hpcC1uYW1lIHtcblx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdH1cblxuXHQuYXJyb3cge1xuXHRcdG1hcmdpbi1sZWZ0OiAyM3B4O1xuXHR9XG59XG5cbi5maWx0ZXItY29udGFpbmVyIHtcblx0d2lkdGg6IDQwMHB4O1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcblx0cGFkZGluZzogNTJweCAzMnB4O1xuXHRib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjYTVhNWE1O1xuXHRoMiB7XG5cdFx0Zm9udC1zaXplOiAyNHB4O1xuXHRcdGxpbmUtaGVpZ2h0OiAzMnB4O1xuXHR9XG59XG4iXX0= */\"],\n  changeDetection: 0\n});","map":{"version":3,"sources":["E:/project/space/src/app/list/list.component.ts"],"names":["FormControl","FormGroup","gql","BehaviorSubject","map","i0","i1","i2","i3","i4","i5","_c0","a1","ListComponent_li_5_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ship_r2","$implicit","ɵɵadvance","ɵɵtextInterpolate","name","ɵɵproperty","ɵɵpureFunction1","id","type","year_built","ListComponent_option_25_Template","homePort_r3","queryFields","queryHomePorts","ListComponent","constructor","apollo","cd","ships","homePorts","offset","limit","totalCount","filterForm","homePort","searchString","feedQuery","watchQuery","query","variables","search","fetchPolicy","nextFetchPolicy","valueChanges","pipe","result","data","shipsResult","subscribe","_a","next","homePortsQuery","_b","x","fetchNext","fetchMore","then","fetchPrev","onFilterSubmit","getHomePorts","changeHomePort","ɵfac","ListComponent_Factory","t","ɵɵdirectiveInject","Apollo","ChangeDetectorRef","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","ListComponent_Template","ɵɵtemplate","ɵɵpipe","ɵɵlistener","ListComponent_Template_button_click_7_listener","ListComponent_Template_button_click_10_listener","ListComponent_Template_form_ngSubmit_15_listener","ListComponent_Template_input_input_18_listener","onSearchKeyPress","ListComponent_Template_select_change_22_listener","ɵɵpipeBind1","ɵɵtextInterpolate1","directives","NgForOf","RouterLinkWithHref","CharacteristicComponent","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","SelectControlValueAccessor","NgSelectOption","ɵNgSelectMultipleOption","pipes","AsyncPipe","styles","changeDetection"],"mappings":"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","sourcesContent":["import { FormControl, FormGroup } from '@angular/forms';\r\nimport { gql } from 'apollo-angular';\r\nimport { BehaviorSubject, map } from 'rxjs';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"apollo-angular\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"../../shared/characteristic/characteristic.component\";\r\nimport * as i5 from \"@angular/forms\";\r\nconst _c0 = function (a1) { return [\"/\", a1]; };\r\nfunction ListComponent_li_5_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"li\", 19)(1, \"div\")(2, \"div\", 20)(3, \"h2\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"a\", 21);\r\n    i0.ɵɵtext(6, \"\\u279D\");\r\n    i0.ɵɵelementEnd()();\r\n    i0.ɵɵelementStart(7, \"div\", 22);\r\n    i0.ɵɵelement(8, \"app-characteristic\", 23)(9, \"app-characteristic\", 24);\r\n    i0.ɵɵelementEnd()()();\r\n} if (rf & 2) {\r\n    const ship_r2 = ctx.$implicit;\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵtextInterpolate(ship_r2 == null ? null : ship_r2.name);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, ship_r2 == null ? null : ship_r2.id));\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵproperty(\"value\", ship_r2 == null ? null : ship_r2.type);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"value\", \"\" + (ship_r2 == null ? null : ship_r2.year_built));\r\n} }\r\nfunction ListComponent_option_25_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"option\");\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const homePort_r3 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(homePort_r3);\r\n} }\r\nconst queryFields = gql `\n  query Feed($offset: Int, $limit: Int, $search: String) {\n    ships(find: {name: $search},offset: $offset, limit: $limit) {\n      name\n      id\n      year_built\n      type\n    }\n    shipsResult {\n      result {\n        totalCount\n      }\n    }\n  }\n`;\r\nconst queryHomePorts = gql `\n  query HomePorts {\n    ships {\n      home_port\n    }\n  }\n`;\r\nexport class ListComponent {\r\n    constructor(apollo, cd) {\r\n        this.apollo = apollo;\r\n        this.cd = cd;\r\n        this.ships = new BehaviorSubject([]);\r\n        this.homePorts = [];\r\n        this.offset = 0;\r\n        this.limit = 10;\r\n        this.totalCount = 0;\r\n        this.filterForm = new FormGroup({\r\n            name: new FormControl(''),\r\n            homePort: new FormControl([]),\r\n            type: new FormControl(''),\r\n        });\r\n        this.searchString = '';\r\n        this.feedQuery = this.apollo.watchQuery({\r\n            query: queryFields,\r\n            variables: {\r\n                offset: this.offset,\r\n                limit: this.limit,\r\n                search: this.searchString\r\n            },\r\n            fetchPolicy: 'cache-and-network',\r\n            nextFetchPolicy: 'cache-first',\r\n        });\r\n        this.feedQuery.valueChanges\r\n            .pipe(map((result) => {\r\n            this.totalCount = result.data.shipsResult.result.totalCount;\r\n            return result;\r\n        }))\r\n            .subscribe((data) => { var _a; return this.ships.next((_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.ships); });\r\n        this.homePortsQuery = this.apollo.watchQuery({\r\n            query: queryFields,\r\n        });\r\n        this.homePortsQuery.valueChanges.subscribe((data) => { var _a, _b; return (this.homePorts = (_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.ships) === null || _b === void 0 ? void 0 : _b.map((x) => x.name)); });\r\n    }\r\n    fetchNext() {\r\n        this.offset =\r\n            this.offset + this.limit >= this.totalCount\r\n                ? this.totalCount\r\n                : this.offset + this.limit;\r\n        this.feedQuery\r\n            .fetchMore({\r\n            variables: {\r\n                offset: this.offset,\r\n                limit: this.limit,\r\n                search: this.searchString\r\n            },\r\n        })\r\n            .then((data) => { var _a; return this.ships.next((_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.ships); });\r\n    }\r\n    fetchPrev() {\r\n        this.offset = this.offset - 10 >= 10 ? this.offset - 10 : 0;\r\n        this.feedQuery\r\n            .fetchMore({\r\n            variables: {\r\n                offset: this.offset,\r\n                limit: 10,\r\n                search: this.searchString\r\n            },\r\n        })\r\n            .then((data) => { var _a; return this.ships.next((_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.ships); });\r\n    }\r\n    onFilterSubmit() { }\r\n    getHomePorts() { }\r\n    changeHomePort() { }\r\n}\r\nListComponent.ɵfac = function ListComponent_Factory(t) { return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.Apollo), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };\r\nListComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ListComponent, selectors: [[\"app-list\"]], decls: 42, vars: 8, consts: [[1, \"container\"], [1, \"list-container\"], [1, \"list\"], [\"class\", \"list-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"button\", 3, \"disabled\", \"click\"], [1, \"button\", \"button--active\", 3, \"disabled\", \"click\"], [1, \"filter-container\"], [1, \"fields\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"name\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", \"placeholder\", \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\", 3, \"input\"], [\"for\", \"homePort\"], [\"formControlName\", \"homePort\", 3, \"change\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\"], [\"for\", \"type_ships\"], [\"id\", \"type_ships\", \"type\", \"radio\", \"value\", \"barge\"], [\"type\", \"radio\", \"value\", \"cargo\"], [\"type\", \"radio\", \"value\", \"High Speed Craft\"], [\"type\", \"radio\", \"value\", \"Tug\"], [1, \"list-item\"], [1, \"ship-name\"], [1, \"arrow\", 3, \"routerLink\"], [1, \"ship-characteristics\"], [\"key\", \"\\u0422\\u0438\\u043F\", 3, \"value\"], [\"key\", \"\\u0413\\u043E\\u0434 \\u043F\\u043E\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\", 3, \"value\"]], template: function ListComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\r\n        i0.ɵɵtext(3, \"SpaceX Ships\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(4, \"ul\", 2);\r\n        i0.ɵɵtemplate(5, ListComponent_li_5_Template, 10, 6, \"li\", 3);\r\n        i0.ɵɵpipe(6, \"async\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"button\", 4);\r\n        i0.ɵɵlistener(\"click\", function ListComponent_Template_button_click_7_listener() { return ctx.fetchPrev(); });\r\n        i0.ɵɵtext(8, \" \\u1438 \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtext(9);\r\n        i0.ɵɵelementStart(10, \"button\", 5);\r\n        i0.ɵɵlistener(\"click\", function ListComponent_Template_button_click_10_listener() { return ctx.fetchNext(); });\r\n        i0.ɵɵtext(11, \" \\u1433 \");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"h2\");\r\n        i0.ɵɵtext(14, \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(15, \"form\", 7);\r\n        i0.ɵɵlistener(\"ngSubmit\", function ListComponent_Template_form_ngSubmit_15_listener() { return ctx.onFilterSubmit(); });\r\n        i0.ɵɵelementStart(16, \"label\", 8);\r\n        i0.ɵɵtext(17, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435: \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(18, \"input\", 9);\r\n        i0.ɵɵlistener(\"input\", function ListComponent_Template_input_input_18_listener() { return ctx.onSearchKeyPress(); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(19, \"br\");\r\n        i0.ɵɵelementStart(20, \"label\", 10);\r\n        i0.ɵɵtext(21, \"\\u041F\\u043E\\u0440\\u0442\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(22, \"select\", 11);\r\n        i0.ɵɵlistener(\"change\", function ListComponent_Template_select_change_22_listener() { return ctx.changeHomePort(); });\r\n        i0.ɵɵelementStart(23, \"option\");\r\n        i0.ɵɵtext(24, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u044B\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(25, ListComponent_option_25_Template, 2, 1, \"option\", 12);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(26, \"button\", 13);\r\n        i0.ɵɵtext(27, \"\\u041D\\u0430\\u0439\\u0442\\u0438\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(28, \"label\", 14);\r\n        i0.ɵɵtext(29, \"\\u0422\\u0438\\u043F\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(30, \"p\");\r\n        i0.ɵɵelement(31, \"input\", 15);\r\n        i0.ɵɵtext(32, \"Barge\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(33, \"p\");\r\n        i0.ɵɵelement(34, \"input\", 16);\r\n        i0.ɵɵtext(35, \"Cargo\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(36, \"p\");\r\n        i0.ɵɵelement(37, \"input\", 17);\r\n        i0.ɵɵtext(38, \"High Speed Craft\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(39, \"p\");\r\n        i0.ɵɵelement(40, \"input\", 18);\r\n        i0.ɵɵtext(41, \"Tug\");\r\n        i0.ɵɵelementEnd()()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(6, 6, ctx.ships));\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"disabled\", ctx.offset <= 0);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate1(\" \", ctx.offset / ctx.limit + 1, \" \");\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"disabled\", ctx.offset >= ctx.totalCount - ctx.limit);\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.filterForm);\r\n        i0.ɵɵadvance(10);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.homePorts);\r\n    } }, directives: [i2.NgForOf, i3.RouterLinkWithHref, i4.CharacteristicComponent, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i5.SelectControlValueAccessor, i5.NgSelectOption, i5.ɵNgSelectMultipleOption], pipes: [i2.AsyncPipe], styles: [\".container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  background-color: #e5e5e5;\\n}\\n\\n.list-container[_ngcontent-%COMP%] {\\n  margin: 52px 63px 0 63px;\\n  width: 100%;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  list-style-type: none;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] {\\n  margin-top: 24px;\\n  margin-bottom: 52px;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%] {\\n  padding: 40px 0 29px;\\n  border-bottom: 1px solid #a5a5a5;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .ship-characteristics[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1fr;\\n  grid-gap: 0px 10%;\\n  gap: 0px 10%;\\n  grid-auto-flow: column;\\n  justify-content: start;\\n  align-content: center;\\n  justify-items: start;\\n  align-items: center;\\n  grid-template-areas: \\\". .\\\";\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .ship-name[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.list-container[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%] {\\n  margin-left: 23px;\\n}\\n\\n.filter-container[_ngcontent-%COMP%] {\\n  width: 400px;\\n  background-color: white;\\n  padding: 52px 32px;\\n  border-right: 1px solid #a5a5a5;\\n}\\n\\n.filter-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 24px;\\n  line-height: 32px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpc3QuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxhQUFBO0VBQ0EsOEJBQUE7RUFDQSx5QkFBQTtBQUNEOztBQUVBO0VBQ0Msd0JBQUE7RUFDQSxXQUFBO0FBQ0Q7O0FBQ0M7RUFDQyxxQkFBQTtBQUNGOztBQUVDO0VBQ0MsZ0JBQUE7RUFDQSxtQkFBQTtBQUFGOztBQUdDO0VBQ0Msb0JBQUE7RUFDQSxnQ0FBQTtBQURGOztBQUlDO0VBQ0MsYUFBQTtFQUNBLDhCQUFBO0VBQ0EsdUJBQUE7RUFDQSxpQkFBQTtFQUFBLFlBQUE7RUFDQSxzQkFBQTtFQUNBLHNCQUFBO0VBQ0EscUJBQUE7RUFDQSxvQkFBQTtFQUNBLG1CQUFBO0VBQ0EsMEJBQUE7QUFGRjs7QUFLQztFQUNDLGFBQUE7RUFDQSxtQkFBQTtBQUhGOztBQU1DO0VBQ0MsaUJBQUE7QUFKRjs7QUFRQTtFQUNDLFlBQUE7RUFDQSx1QkFBQTtFQUNBLGtCQUFBO0VBQ0EsK0JBQUE7QUFMRDs7QUFNQztFQUNDLGVBQUE7RUFDQSxpQkFBQTtBQUpGIiwiZmlsZSI6Imxpc3QuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcblx0ZGlzcGxheTogZmxleDtcblx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiAjZTVlNWU1O1xufVxuXG4ubGlzdC1jb250YWluZXIge1xuXHRtYXJnaW46IDUycHggNjNweCAwIDYzcHg7XG5cdHdpZHRoOiAxMDAlO1xuXG5cdHVsIHtcblx0XHRsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XG5cdH1cblxuXHQubGlzdCB7XG5cdFx0bWFyZ2luLXRvcDogMjRweDtcblx0XHRtYXJnaW4tYm90dG9tOiA1MnB4O1xuXHR9XG5cblx0Lmxpc3QtaXRlbSB7XG5cdFx0cGFkZGluZzogNDBweCAwIDI5cHg7XG5cdFx0Ym9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNhNWE1YTU7XG5cdH1cblxuXHQuc2hpcC1jaGFyYWN0ZXJpc3RpY3Mge1xuXHRcdGRpc3BsYXk6IGdyaWQ7XG5cdFx0Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuXHRcdGdyaWQtdGVtcGxhdGUtcm93czogMWZyO1xuXHRcdGdhcDogMHB4IDEwJTtcblx0XHRncmlkLWF1dG8tZmxvdzogY29sdW1uO1xuXHRcdGp1c3RpZnktY29udGVudDogc3RhcnQ7XG5cdFx0YWxpZ24tY29udGVudDogY2VudGVyO1xuXHRcdGp1c3RpZnktaXRlbXM6IHN0YXJ0O1xuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0Z3JpZC10ZW1wbGF0ZS1hcmVhczogJy4gLic7XG5cdH1cblxuXHQuc2hpcC1uYW1lIHtcblx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdH1cblxuXHQuYXJyb3cge1xuXHRcdG1hcmdpbi1sZWZ0OiAyM3B4O1xuXHR9XG59XG5cbi5maWx0ZXItY29udGFpbmVyIHtcblx0d2lkdGg6IDQwMHB4O1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcblx0cGFkZGluZzogNTJweCAzMnB4O1xuXHRib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjYTVhNWE1O1xuXHRoMiB7XG5cdFx0Zm9udC1zaXplOiAyNHB4O1xuXHRcdGxpbmUtaGVpZ2h0OiAzMnB4O1xuXHR9XG59XG4iXX0= */\"], changeDetection: 0 });\r\n"]},"metadata":{},"sourceType":"module"}